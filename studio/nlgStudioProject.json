{"projectName":"Portfolio Holdings Summary","settings":{"projectType":"json","projectDescription":"","currencySettings":[{"currencyCode":"USD","baseFormatFlag":"Yes","largeThousands":"1,234","largeMillions":"1,234,567","largeBillions":"1,234,567,891","negativeOptions":"minus","currencySymbol":"1"}],"corsAllowableDomains":[],"preferences":{"editorViewPreference":"MARKUP_MODE"}},"sampleOutput":"none","activeApiKey":false,"data":[{"id":"Primary","type":"json","jsonData":{"portfolioName":"Sample Portfolio","key":"Portfolio","values":[{"key":"Health Care","values":[{"key":"Amgen Inc","values":[{"asset":"Amgen Inc","quantity":"10","instrumentId":"CX_US031162BG42_USD","companyName":"Amgen Inc","sectorName":"Health Care","assetName":"US Corporate","unitValue":106.2264,"positionValue":1062.264}],"groupValue":1062.264,"groupWeight":0.0277012188649477},{"key":"AMGEN INC","values":[{"asset":"Amgen Inc","quantity":"30","instrumentId":"CX_US031162BK53_USD","companyName":"AMGEN INC","sectorName":"Health Care","assetName":"US Corporate","unitValue":109.9807,"positionValue":3299.421}],"groupValue":3299.421,"groupWeight":0.08604074246007076},{"key":"Envision Healthcare Corp","values":[{"asset":"Envision Healthcare Corp","quantity":"50","instrumentId":"CX_US03232PAD06_USD","companyName":"Envision Healthcare Corp","sectorName":"Health Care","assetName":"US Corporate","unitValue":104.3281,"positionValue":5216.405000000001}],"groupValue":5216.405000000001,"groupWeight":0.13603094578485908},{"key":"Aetna Inc","values":[{"asset":"Aetna Inc","quantity":"5","instrumentId":"CX_US00817YAU29_USD","companyName":"Aetna Inc","sectorName":"Health Care","assetName":"US Corporate","unitValue":101.32,"positionValue":506.59999999999997},{"asset":"Aetna Inc","quantity":"30","instrumentId":"CX_US00817YAW84_USD","companyName":"Aetna Inc","sectorName":"Health Care","assetName":"US Corporate","unitValue":101.4833,"positionValue":3044.499}],"groupValue":3551.0989999999997,"groupWeight":0.0926038824718685}],"groupValue":13129.189,"groupWeight":0.34237678958174605},{"key":"Energy","values":[{"key":"Anadarko Petroleum Corp","values":[{"asset":"Anadarko Petroleum Corp","quantity":"40","instrumentId":"CX_US032511BM81_USD","companyName":"Anadarko Petroleum Corp","sectorName":"Energy","assetName":"US Corporate","unitValue":109.3309,"positionValue":4373.236}],"groupValue":4373.236,"groupWeight":0.11404318284726625}],"groupValue":4373.236,"groupWeight":0.11404318284726625},{"key":"Technology","values":[{"key":"Analog Devices Inc","values":[{"asset":"Analog Devices Inc","quantity":"30","instrumentId":"CX_US032654AN54_USD","companyName":"Analog Devices Inc","sectorName":"Technology","assetName":"US Corporate","unitValue":100.1684,"positionValue":3005.052}],"groupValue":3005.052,"groupWeight":0.07836432671402667},{"key":"IBM","values":[{"asset":"International Business Machines Corp","quantity":"10","instrumentId":"CX_US4592001014_NYQ","companyName":"IBM","sectorName":"Technology","assetName":"US Corporate","unitValue":179.82,"positionValue":1798.1999999999998}],"groupValue":1798.1999999999998,"groupWeight":0.04689261027668165},{"key":"Microsoft Corp","values":[{"asset":"Microsoft Corp","quantity":"30","instrumentId":"CX_US594918AQ78_USD","companyName":"Microsoft Corp","sectorName":"Technology","assetName":"US Corporate","unitValue":98.3145,"positionValue":2949.435}],"groupValue":2949.435,"groupWeight":0.07691397285697062}],"groupValue":7752.687,"groupWeight":0.20217090984767894},{"key":"Consumer Non-cyclical","values":[{"key":"Anheuser-Busch Inbev Finance Inc","values":[{"asset":"Anheuser-Busch Inbev Finance Inc","quantity":"20","instrumentId":"CX_US035242AJ52_USD","companyName":"Anheuser-Busch Inbev Finance Inc","sectorName":"Consumer Non-cyclical","assetName":"US Corporate","unitValue":101.0953,"positionValue":2021.906},{"asset":"Anheuser-Busch Inbev Finance Inc","quantity":"10","instrumentId":"CX_US035242AL09_USD","companyName":"Anheuser-Busch Inbev Finance Inc","sectorName":"Consumer Non-cyclical","assetName":"US Corporate","unitValue":101.9585,"positionValue":1019.585}],"groupValue":3041.491,"groupWeight":0.07931456574520897}],"groupValue":3041.491,"groupWeight":0.07931456574520897},{"key":"Finance Companies","values":[{"key":"Aercap Ireland Ltd","values":[{"asset":"Aercap Ireland Ltd","quantity":"25","instrumentId":"CX_US00772BAM37_USD","companyName":"Aercap Ireland Ltd","sectorName":"Finance Companies","assetName":"US Corporate","unitValue":110.2361,"positionValue":2755.9024999999997}],"groupValue":2755.9024999999997,"groupWeight":0.07186712373097133}],"groupValue":2755.9024999999997,"groupWeight":0.07186712373097133},{"key":"Communications","values":[{"key":"Frontier Communications Corp","values":[{"asset":"Frontier Communications Corp","quantity":"40","instrumentId":"CX_US35906AAL26_USD","companyName":"Frontier Communications Corp","sectorName":"Communications","assetName":"US Corporate","unitValue":106.2743,"positionValue":4250.972},{"asset":"Frontier Communications Corp","quantity":"10","instrumentId":"CX_US35906AAN81_USD","companyName":"Frontier Communications Corp","sectorName":"Communications","assetName":"US Corporate","unitValue":91.601,"positionValue":916.01}],"groupValue":5166.982,"groupWeight":0.13474211613426154}],"groupValue":5166.982,"groupWeight":0.13474211613426154},{"key":"Transportation","values":[{"key":"Fedex Corp","values":[{"asset":"Fedex Corp","quantity":"20","instrumentId":"CX_US31428XAY22_USD","companyName":"Fedex Corp","sectorName":"Transportation","assetName":"US Corporate","unitValue":106.3853,"positionValue":2127.706}],"groupValue":2127.706,"groupWeight":0.05548531211286688}],"groupValue":2127.706,"groupWeight":0.05548531211286688}],"groupValue":38347.1934,"groupWeight":1}}],"templates":[{"id":"Main","value":"<p>[[if(NumberOfIssuers == 0)</p><p>{[[NoIssuers]]}</p><p>elseif(NumberOfIssuers == 1)</p><p>{[[OneIssuer]]}</p><p>elseif(NumberOfSectors == 1)</p><p>{[[ManyIssuersOneSector]]}</p><p>else</p><p>{[[ManyIssuersManySectors]]}</p><p>]]</p><p><em>Please note that all values are theoretical, actual market valuation may differ slightly.</em></p>","postProcessors":[{"postProcessorId":"PP01","enabled":true}]},{"id":"NoIssuers","value":"<p>Your [[PortfolioName]] does not have any investments. Please select a portfolio with investments to see a report about it.</p>"},{"id":"OneIssuer","value":"<p><em>You will fill in this template during the second part of the workshop.</em></p><p><br></p>"},{"id":"ManyIssuersManySectors","value":"<p>The value of your [[PortfolioName]] is [[Dollar(WholeJSON.groupValue)]]. You have investments across [[Alpha(NumberOfIssuers)]] different issuers spanning [[Alpha(NumberOfSectors)]] sectors. [[SortedSectors[0].key]] is your largest sector allocation in the portfolio, making up [[Percent(SortedSectors[0].groupWeight)]] of the total value. Your [[Alpha(len(TopIssuers))]] largest allocations by issuer are [[map(TopIssuers, i -&gt; IssuerTotal(i))]] and the [[Alpha(sum(map(TopIssuers, i -&gt; len(i.values))))]] positions across these [[Alpha(len(TopIssuers))]] issuers comprise [[Percent(sum(map(TopIssuers, i -&gt; i.groupWeight)))]] of your portfolio by value.</p><h3>Sectors</h3><p>[[forAll(filter(SortedSectors, s -&gt; s.groupWeight * 100 &gt;= SectorThreshold), SectorDescription)]]</p><p>[[RemainingSectors(filter(SortedSectors, s -&gt; s.groupWeight * 100 &lt; SectorThreshold))]]</p>"},{"id":"IssuerTotal","value":"<p>#define IssuerTotal(issuer) [[issuer.key]] at [[Dollar(issuer.groupValue)]]</p>"},{"id":"Dollar","value":"<p>#define Dollar(amount) [[currency(round(amount,2),'USD','SYMBOL','','','')]]</p>"},{"id":"Percent","value":"<p>#define Percent(amount) [[round(amount*100, 1)]]%</p>"},{"id":"ManyIssuersOneSector","value":"<p>The value of your [[PortfolioName]] is [[Dollar(WholeJSON.groupValue)]]. You have investments across [[Alpha(NumberOfIssuers)]] different issuers in the [[WholeJSON.values[0].key]] sector. Your [[Alpha(len(TopIssuers))]] largest allocations by issuer are [[map(TopIssuers, i -&gt; IssuerTotal(i))]] and the [[Alpha(sum(map(TopIssuers, i -&gt; len(i.values))))]] positions across these [[Alpha(len(TopIssuers))]] issuers comprise [[Percent(sum(map(TopIssuers, i -&gt; i.groupWeight)))]] of your portfolio by value.</p>"},{"id":"SectorDescription","value":"<p>#define SectorDescription(sector)</p><p>[[issuers = len(sector.values);</p><p>positions = sum(map(sector.values, i -&gt; len(i.values)));</p><p>if( positions == 1 )</p><p>{[[SectorOnePosition(sector)]]}</p><p>elseif( issuers == 1)</p><p>{[[SectorOneIssuer(sector)]]}</p><p>else</p><p>{[[SectorManyIssuers(sector)]]}]]</p>"},{"id":"SectorOnePosition","value":"<p>#define SectorOnePosition(sector)</p><p>The [[chooseAtRandom(\"only\", \"lone\")]] [[sector.key]] investment is [[chooseAtRandom(\"a single position of\", \"a position of\", \"one positon with\")]] [[countable(sector.values[0].values[0].quantity, '', 'unit')]] in [[sector.values[0].key]] at [[Dollar(sector.values[0].values[0].unitValue)]] per unit, for a total of [[Dollar(sector.values[0].values[0].positionValue)]].</p>"},{"id":"SectorOneIssuer","value":"<p>#define SectorOneIssuer(sector)</p><p>Your positions issued by [[sector.values[0].key]] make up your entire investment in [[sector.key]], totalling [[Dollar(sector.values[0].groupValue)]]. The positions consist of [[map(sector.values[0].values, p -&gt; Position(p))]].</p>"},{"id":"SectorManyIssuers","value":"<p>#define SectorManyIssuers(sector)</p><p>[[sortedIssuers = sort(sector.values, (a,b) -&gt; b.groupValue - a.groupValue);</p><p>if(percentage(sortedIssuers[0].groupValue, sector.groupValue) &gt; SignificantIssuerThreshold)</p><p>{[[SectorMostlyOneIssuer(sector, sortedIssuers[0], filter(sortedIssuers, i -&gt; i != sortedIssuers[0]))]]<span>}</span></p><p>else</p><p>{[[SectorSplit(sector, sortedIssuers, sortedIssuers[0])]]}]]&nbsp;</p>"},{"id":"Position","value":"<p>#define Position(position) [[countable(position.quantity, '', 'unit')]] of [[position.instrumentId]] at [[Dollar(position.unitValue)]]&nbsp;</p>"},{"id":"RemainingSectors","value":"<p>#define RemainingSectors(sectors) [[<br>sectorCount = len(sectors);<br>if(sectorCount == 1)</p><p>{Your portfolio also includes a small investment in [[sectors[0].key]] accounting for [[Percent(sectors[0].groupWeight)]] of the total portfolio.}</p><p>elseif(sectorCount &gt; 1)</p><p>{</p><h3>Remainder</h3><p>The portfolio has also invested in [[map(sectors, s -&gt; s.key)]], but these each make up less than [[SectorThreshold]]% of the total portfolio.}</p><p>]]</p>"},{"id":"SectorMostlyOneIssuer","value":"<p>#define SectorMostlyOneIssuer(sector, mainIssuer, otherIssuers)</p><p>The [[sector.key]] investment is almost entirely made up from your [[inflectNoun('position',len(mainIssuer.values))]] in [[mainIssuer.key]]. [[</p><p>if(len(mainIssuer.values) == 1)</p><p>{You have [[Position(mainIssuer.values[0])]], worth a total of [[Dollar(mainIssuer.groupValue)]]}</p><p>else</p><p>{They are worth [[Dollar(mainIssuer.groupValue)]] and consist of [[map(mainIssuer.values, p -&gt; Position(p))]]}</p><p>]]. [[</p><p>if(len(otherIssuers) ==1)</p><p>{The remainder is achieved through [[Dollar(otherIssuers[0].groupValue)]] in [[otherIssuers[0].key<s>​</s>]]}</p><p>elseif(len(otherIssuers) &lt;= Top)</p><p>{The remainder is spread across [[map(otherIssuers, i -&gt; i.key)]] and comprises [[sum(map(otherIssuers, i -&gt; len(i.values)))]] positions}</p><p>else</p><p>{The biggest other [[sector.key]] investments are in [[map(top(otherIssuers, Top), i -&gt; i.key)]]}</p><p>]].</p>"},{"id":"SectorSplit","value":"<p>#define SectorSplit(sector, sortedIssuers, biggestIssuer)</p><p>[[if(len(sortedIssuers) &gt; Top)</p><p>{The top [[Alpha(Top)]] issuers within [[sector.key]] are [[map(sortedIssuers, i -&gt; IssuerTotal(i))]]}</p><p>else</p><p>{There are [[numToWords(len(sortedIssuers),'',10)]] issuers under your [[sector.key]] investments. These are [[map(sortedIssuers, i -&gt; IssuerTotal(i))]]}</p><p>]]. The largest issuer, [[sortedIssuers[0].key]] represents [[Percent(sortedIssuers[0].groupValue / sector.groupValue)]] of your [[sector.key]] investment and [[Percent(sortedIssuers[0].groupWeight)]] of your overall investment.&nbsp;</p>"},{"id":"Alpha","value":"<p>#define Alpha(number) [[numToWords(number, '', 10)]]</p>"}],"lexRuleFiles":[],"mappings":[{"mappedName":"EmptyList","dataSource":"[[filter((1,2), x -&gt; x ==3) ]]","type":{"dataType":"LIST"}},{"mappedName":"NumberOfIssuers","dataSource":"[[sum(map(WholeJSON.values, sector -&gt; len(sector.values)))]]","type":{"dataType":"NUMERIC"}},{"mappedName":"NumberOfSectors","dataSource":"[[len(WholeJSON.values)]]","type":{"dataType":"NUMERIC"}},{"mappedName":"PortfolioName","dataSource":"[[joinStrings(WholeJSON.portfolioName, contains(lower(WholeJSON.portfolioName), &#39;portfolio&#39;)?&#39;&#39;:&#39; portfolio&#39;)]]","type":{"dataType":"STRING"}},{"mappedName":"SectorThreshold","dataSource":"10","type":{"dataType":"NUMERIC"}},{"mappedName":"SignificantIssuerThreshold","dataSource":"80","type":{"dataType":"NUMERIC"}},{"mappedName":"SortedIssuers","dataSource":"[[sort(reduce(map(SortedSectors, s -&gt; s.values), EmptyList, (a,b) -&gt; concat(a,map(b, x -&gt; x))), (c,d) -&gt; d.groupValue - c.groupValue)]]","type":{"dataType":"LIST"}},{"mappedName":"SortedSectors","dataSource":"[[sort(WholeJSON.values, (a,b) -&gt; b.groupValue - a.groupValue)]]","type":{"dataType":"LIST"}},{"mappedName":"Top","dataSource":"3","type":{"dataType":"NUMERIC"}},{"mappedName":"TopIssuers","dataSource":"[[top(SortedIssuers, Top)]]","type":{"dataType":"LIST"}},{"mappedName":"WholeJSON","dataSource":"","type":{"dataType":"JSON"}}],"version":6,"collaborators":[],"activeUser":{"userId":"d9e5a549-08db-4ceb-adae-7fda019512f3","username":"william.bradshaw@arria.com","firstName":"William","lastName":"Bradshaw"},"postProcessors":[{"type":"Grammar","id":"PP01","correctAandAn":true,"correctCapitalisation":true}]}